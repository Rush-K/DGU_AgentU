<!--pages/location/location.wxml-->
<view class="container">
  <!-- latitude="37.558253"
  longitude="127.000189" -->
  <map 
    class="map" 
    scale="17"
    min-scale="1"
    max-scale="18"
    markers="{{markers}}"
    show-compass="true"
    show-location="true"
    show-scale="true"
    enable-rotate="true"
    bindmarkertap="markertap"
    bindregionchange="regionChange"
  ></map>


  <view class="card">
    <view class="card-title">
      <view style="font-weight: 600; font-size: 40rpx;">
        {{
          selectedMarker === null ?
          "마커를 선택해주세요!" :
          markers[selectedMarker].data.title
        }}
      </view>
    </view>

    <view class="card-body">
      <!-- 마커가 선택되지 않은 경우, 안내 메세지 출력 -->
      <block wx:if="{{selectedMarker === null}}">
        <view style="margin: auto 25rpx;">
          마커를 선택하시면, 해당 시설에 대한 정보를 확인하실 수 있습니다.
        </view>
      </block>

      <!-- 마커가 선택된 경우, 데이터 바인딩 및 출력 -->
      <block wx:else>
        <view class="facility-info">
          <view class="facility-location" >            
            <text>위치: {{ markers[selectedMarker].data.location }} \n</text>

            <text>운영시간: {{ markers[selectedMarker].data.operatingTime }}</text>
          </view>

          <view class="facility-description">
            <text>{{ markers[selectedMarker].data.description }}</text>
          </view>

          <view class="facility-button">
            <text   
              class="button"
              bindtap="{{ markers[selectedMarker].data.category == '식당' ? 'seeDetails' : '' }}"
              style="background-color: {{ markers[selectedMarker].data.category == '식당' ? '' : 'lightgray'}}; color: {{ markers[selectedMarker].data.category == '식당' ? '' : 'black'}};"
            >{{ markers[selectedMarker].data.category == '식당' ? '메뉴 보기' : '사용 불가'}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>
